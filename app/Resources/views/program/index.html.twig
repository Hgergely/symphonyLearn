{# app/Resources/views/movie/new.html.twig #}
{% extends '::base.html.twig' %}
{% block body %}


    {% if insertResult == 1 %}
        <div class="alert alert-success  in alert-dismissable" style="margin-top:18px;">
            <a href="#" class="close" data-dismiss="alert" aria-label="close" title="close">Ã—</a>
            <strong>Success!</strong> The program has been successfully added.
        </div>
    {% endif %}


    <div id="addNewSection" class="container">

        <div class="row formRow">
            <div class="text-center col">
                <h4>Set new program </h4>
            </div>
        </div>

        {{ form_start(form) }}
        {{ form_errors(form) }}

        <div class="row formRow">

            <div class="col col-sm-12 col-md-12 col-lg-6">
                <div class="col formRow">
                    {{ form_label(form.movie, 'Movie', {'label_attr': {'class': 'formLabel'}}) }}

                </div>
                <div class="col formRow">
                    {{ form_widget(form.movie, {'attr': {'class': 'formElements'}}) }}

                </div>
            </div>

            <div class="col  col-sm-12 col-md-12 col-lg-6">
                <div class="col formRow">
                    {{ form_label(form.datetime) }}

                </div>
                <div class="col formRow">
                    {{ form_widget(form.datetime) }}

                </div>
            </div>
        </div>

        <div class="row formRow">
            <div class="col text-center col-sm-12 col-md-12 formProgramRow">
                {{ form_widget(form.save, {'attr': {'class': 'btn btn-primary-green'}}) }}

            </div>
        </div>
        </div>

        <hr>

        {{ form_end(form) }}
    </div>

<div class="container">

    <div class="row ">
        {% set counter = 0 %}
        {% for day in weekdays %}
            <div class="seven" style="">

                <div class="seven text-center prgramHeader">
                    {{ day.display }}
                </div>
                <div style="position: relative;">
                    <div  class="seven text-left prgramCoulomnBackGround">

                        {% for x in 8..24 %}
                            <div class="hourLine" >
                                {% if  counter == 0 %}
                                    <div class="timeCaption" >
                                        {{ x }}:00
                                    </div>
                                {% endif %}
                            </div>
                        {% endfor %}

                    </div>
                    <div class="seven text-left prgramCoulomn">

                        {% for program in programs %}


                            {% if  day.display == program.datetime.format('Y-m-d') %}
                                {%  set duration = program.datetime.format('H')*30 + program.datetime.format('i')/2 - 240 %}
                                <div class="program" refId="{{ program.movie.getId() }}" style="position: absolute; height:  {{ program.movie.getDuration()/2 }}px; top: {{ duration }}px;">

                                    <div style="float:left; padding: 1px;  font-size: 0.7vw;">
                                        <strong>{{ program.movie.getTitle() }}</strong>
                                            ({{ program.datetime.format("H:i") }})
                                            {{ program.movie.getDuration() }} min
                                    </div>


                                </div>

                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
            </div>
        {% set counter = counter+1 %}
        {% endfor %}

    </div>

</div>


    <div id="myModal" class="modal fade">

    </div>


{% endblock %}

